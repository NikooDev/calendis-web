const env = process.env.NEXT_PUBLIC_ENVIRONMENT;
const vercelEnv = process.env.VERCEL_ENV;

console.log('üîç V√©rification des environnements :');
console.log(`‚û°Ô∏è NEXT_PUBLIC_ENVIRONMENT = ${env}`);
console.log(`‚û°Ô∏è VERCEL_ENV = ${vercelEnv}`);
console.log('-----------------------------------');

const validEnv = {
	production: 'production',
	testing: 'preview',
	development: 'development'
};

const expectedVercelEnv = validEnv[env];

if (!expectedVercelEnv) {
	console.error(`üö® Erreur : NEXT_PUBLIC_ENVIRONMENT="${env}" n‚Äôest pas reconnu (production, testing, development attendus).`);
	process.exit(1);
}

if (vercelEnv !== expectedVercelEnv) {
	console.error(
		`üö® Incoh√©rence d√©tect√©e :\n` +
		`NEXT_PUBLIC_ENVIRONMENT=${env} ‚Üí attendait VERCEL_ENV=${expectedVercelEnv}, mais a re√ßu ${vercelEnv}.`
	);
	process.exit(1);
}